
<ion-view title="{{selectedChild.name}}" cache-view="false" >

  <div class="info-app loading-container active" ng-class="{visible: infoApp}" ng-show="infoApp" ng-click="closeInfoApp()" ng-style="displayNone">
    <div class="card">
      <div class="item item-divider info-app-title">
       BEM VINDA!
      </div>

      <div class="item item-text-wrap info-app-text">
       <p>
        A partir de agora você tem acesso a informações sobre cada momento da gestação ou da fase do seu filho.
        Você receberá três mensagens novas por semana.
       </p>
      </div>
      <button class="button button-positive button-block">Ok entendi</button>
    </div>

  </div>

  <ion-content class="has-header padding messages-list">

    <div class="card" ng-show="loadingMessages" >

      <div class="item item-divider" ng-class="new-message">
        Messagens
      </div>

      <div class="item item-text-wrap">
        Carregando...
      </div>
    </div>

    <div class="card" ng-show="messageState" >

      <div class="item item-divider" ng-class="new-message">
        Messagens
      </div>

      <div class="item item-text-wrap">
        Seu filho(a) ainda não possui messagens
      </div>
    </div>

    <!-- CHILDREN'S OPTIONS -->

    <div class="row box-children-option" ng-show="childrenOptions">
      <div class="col">
        Escolha um filho(a) para ver as menssagens
      </div>
    </div>

    <div class="row" ng-repeat="child in children" ng-show="childrenOptions">
      <button class="button button-positive button-block" ng-click="loadMessageBy(child.id)" >
        {{child.name}}
      </button>
    </div>

    <!-- ================ BIRTHDAY CARD ===================== -->
    <!-- was necessary css inline to set dynamic path image style -->
    <div ng-if="birthdayCard.show" class="card card-back" style="background: url('{{birthdayCard.url}}');
      position: static;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      background-size: cover;
      background-repeat: no-repeat;">

      <div class="item item-divider item-divider-custom header-bd-card" >
        <div class="row">
          <div class="col col-20 bd-card-text">
            {{selectedChild.name}}
          </div>

          <div class="col col-30 bd-card-text">
            {{birthdayCard.age_text}}

          </div>

          <div class="col col-10">
            <img class="flag-new" src="img/flag_novo.svg">
          </div>

        </div>
      </div>

      <div>

      </div>

      <div class="item item-text-wrap padding-text birthday-text">
        {{ birthdayCard.text }}
      </div>
    </div>

    <!-- ================ MESSAGE CARD ===================== -->
    <div ng-hide="showNoMessage" class="card" collection-repeat="message in messages track by message.id | orderBy:'-delivery_date'">

      <div class="item item-divider item-divider-custom {{message.category}}" >
        <div class="row">

          <div class="col col-30 age-in-week">
            {{message.child_age_in_week_at_delivery.toUpperCase()}} - {{message.article_category}}

          </div>


          <div class="col col-10 date-message">
            {{ message.delivery_date | date: 'd MMM' }}

          </div>

          <div class="col col-10">
            <img ng-show="{{message.isNew}}" class="flag-new" src="img/flag_novo.svg">
          </div>

        </div>
      </div>

      <div class="item item-text-wrap padding-text">
        {{ message.text }}
      </div>

      <div class="item tabs tabs-secondary tabs-icon-left" ng-if="message.url">

        <a class="tab-item" ng-click="openInNewPage(message)" href="#">
          <i class="icon ion-plus-circled"></i>
          Leia Mais
        </a>
        <div ng-click="shareMessage(message.text, message.url)" class="tab-item item-share-social">
          <i class="icon ion-android-share-alt"> </i>
        </div>

      </div>
    </div>
  </ion-content>
</ion-view>
