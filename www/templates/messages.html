
<ion-view title="{{selectedChild.name}}" cache-view="false">

  <ion-content class="has-header padding messages-list">

    <div class="card" ng-show="loadingMessages" >

      <div class="item item-divider" ng-class="new-message">
        Messagens
      </div>

      <div class="item item-text-wrap">
        Carregando...
      </div>
    </div>

    <div class="card" ng-show="showNoMessage && messages.length === 0" >

      <div class="item item-divider" ng-class="new-message">
        Messagens
      </div>

      <div class="item item-text-wrap">
        Seu filho(a) ainda nÃ£o possui messagens
      </div>
    </div>
    <!-- ================ BIRTHDAY CARD ===================== -->
    <!-- was necessary css inline to set dynamic path image style -->
    <div ng-if="birthdayCard.show" class="card card-back" style="background: url('{{birthdayCard.url}}');
      position: static;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      background-size: cover;
      background-repeat: no-repeat;">

      <div class="item item-divider item-divider-custom header-bd-card" >
        <div class="row">
          <div class="col col-20 bd-card-text">
            {{selectedChild.name}}
          </div>

          <div class="col col-30 bd-card-text">
            {{birthdayCard.age_text}}

          </div>

          <div class="col col-10">
            <img class="flag-new" src="img/flag_novo.svg">
          </div>

        </div>
      </div>

      <div>

      </div>

      <div class="item item-text-wrap padding-text birthday-text">
        {{ birthdayCard.text }}
      </div>
    </div>

    <!-- ================ MESSAGE CARD ===================== -->
    <div ng-hide="showNoMessage" class="card" ng-repeat="message in messages | orderBy:'-delivery_date'">

      <div class="item item-divider item-divider-custom {{message.category}}" >
        {{message.id}}
        <div class="row">

          <div class="col col-30 age-in-week">
            {{message.child_age_in_week_at_delivery.toUpperCase()}} - {{message.article_category}}

          </div>


          <div class="col col-10 date-message">
            {{ message.delivery_date | date: 'd MMM' }}

          </div>

          <div class="col col-10">
            <img ng-show="{{message.isNew}}" class="flag-new" src="img/flag_novo.svg">
          </div>

        </div>
      </div>

      <div class="item item-text-wrap padding-text">
        {{ message.text }}
      </div>

      <div class="item tabs tabs-secondary tabs-icon-left" ng-if="message.url">

        <a class="tab-item" ng-click="openInNewPage(message)" href="#">
          <i class="icon ion-plus-circled"></i>
          Leia Mais
        </a>
        <div ng-click="shareMessage(message.text, message.url)" class="tab-item item-share-social">
          <i class="icon ion-android-share-alt"> </i>
        </div>

      </div>
    </div>
  </ion-content>
</ion-view>
