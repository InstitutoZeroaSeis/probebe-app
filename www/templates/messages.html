
<ion-view title="" ng-controller="MessagesCtrl">

  <ion-side-menus enable-menu-with-back-views="false">
    <ion-nav-bar class="bar-light">

      <ion-nav-buttons side="left">
        <button class="button button-icon button-clear ion-navicon" menu-toggle="left">
        </button>
      </ion-nav-buttons>

      <ion-nav-title>
        <h3>{{selectedChild.name}}</h3>
      </ion-nav-title>

      <ion-nav-buttons side="right">
        <img class="logo-nav-home" src="img/logo_nav.png">
      </ion-nav-buttons>

    </ion-nav-bar>

    <ion-side-menu-content>

      <ion-content class="has-header padding messages-list">
      <!-- MICRODONATION MESSAGE SENDING -->
<!--         <div class="row row-loading-messages">
          <div class="col col-25">
            <img class=" img-center border-radius" src="img/icone_microdoacao_loading.svg">
          </div>

          <div class="col col-75 col-center loading-bar">
            <div class="loading-bar dinamic-loading" style="width: {{donation.porcent}}%;"></div>
          </div>
        </div>
 -->
        <!-- <div class="row">
          <h4 class="col title-loadding" ng-hide="false"> Mandando {{donation.sum}} de {{donation.total}} mesagen(s) </h4>
          <h4 class="col title-loadding" ng-hide="false"> Parabéns! Você fez mais mães felizes!</h4>
        </div>
 -->
        <div class="card" ng-show="showNoMessage" >

          <div class="item item-divider" ng-class="new-message">
            Messagens
          </div>

          <div class="item item-text-wrap">
            Seu filho(a) ainda não possue messagens
          </div>
        </div>
        <!-- ================ BIRTHDAY CARD ===================== -->
        <!-- was necessary css inline to set dynamic path image style -->
        <div class="card card-back" style="background: url('{{birthdayCard.url}}');
          position: static;
          width: 100%;
          height: 100%;
          top: 0;
          left: 0;
          background-size: cover;
          background-repeat: no-repeat;">

          <div class="item item-divider item-divider-custom category-2" >
            <div class="row">
              <div class="col col-20 bd-card-text">
                {{selectedChild.name}}
              </div>

              <div class="col col-30 bd-card-text">
                {{birthdayCard.age_text}}

              </div>

              <div class="col col-10">
                <img class="flag-new" src="img/flag_novo.svg">
              </div>

            </div>
          </div>

          <div>

          </div>

          <div class="item item-text-wrap padding-text birthday-text">
            {{ birthdayCard.text }}
          </div>
        </div>

        <!-- ================ MESSAGE CARD ===================== -->
        <div ng-hide="showNoMessage" class="card" ng-repeat="message in selectedChild.messages | orderBy:'-delivery_date'">

          <div class="item item-divider item-divider-custom {{message.category}}" >
            <div class="row">

              <div class="col col-30 age-in-week">
                2 SEMANA(S) - {{message.article_category.toLowerCase()}}

              </div>


              <div class="col col-10 date-message">
                {{ message.delivery_date | date: 'd MMM' }}

              </div>

              <div class="col col-10">
                <img ng-show="{{message.isNew}}" class="flag-new" src="img/flag_novo.svg">
              </div>

            </div>
          </div>

          <div class="item item-text-wrap padding-text">
            {{ message.text }}
          </div>

          <div class="item tabs tabs-secondary tabs-icon-left" ng-if="message.url">

            <a class="tab-item" ng-click="openInBrowser(message)" href="#">
              <i class="icon ion-plus-circled"></i>
              Leia Mais
            </a>
            <div ng-click="shareMessage(message.text, message.url)" class="tab-item item-share-social">
              <i class="icon ion-android-share-alt"> </i>
            </div>

          </div>
        </div>
      </ion-content>
    </ion-side-menu-content>

    <ion-side-menu side="left">
      <ion-content class='has-header bg-blue' scroll='false'>
        <ion-list>
          <ion-item class="bg-blue" nav-clear ng-class="{active: selectedChild == child}" menu-close ng-click="selectChild(child)" ng-repeat="child in children">
            <i>
              <img class="custom-icon" src="img/icone_bebe.svg">
            </i>
            {{child.name}}
            <span class="badge badge-assertive">{{newMessagesTotal}}</span>
          </ion-item>
        </ion-list>

        <ion-list ng-controller="ProfileCtrl">
          <ion-item class="bg-blue" nav-clear ng-click="index()">
            <i>
              <img class="custom-icon" src="img/icone_perfil.svg">
            </i>
            Perfil
          </ion-item>
        </ion-list>

        <ion-list ng-controller="AboutCtrl">
          <ion-item class="bg-blue" nav-clear ng-click="index()">
            <i class="ion-information icon-info"></i>
            Sobre
          </ion-item>
        </ion-list>

        <ion-list ng-controller="AuthCtrl">
          <ion-item class="bg-blue" nav-clear ng-click="signOut()">
            <i>
              <img class="custom-icon" src="img/icone_saida.svg">
            </i>
            Sair
          </ion-item>
        </ion-list>
      </ion-content>
    </ion-side-menu>
  </ion-side-menus>
</ion-view>
