<ion-view title="Perfil">

  <ion-side-menus enable-menu-with-back-views="false">
    <ion-nav-bar class="bar-light">

      <ion-nav-buttons side="left">
        <button class="button button-icon button-clear ion-navicon" menu-toggle="left">
        </button>
      </ion-nav-buttons>
    </ion-nav-bar>

    <ion-side-menu-content>
      <ion-content class="has-header padding messages-list" >

      <div class="row">
        <div class="col">
          Adicione filhos, edite telefone, e-mail e dados pessoais aqui
        </div>
     </div>
      <div class="row">
        <div class="col">
          <form name="profileForm" ng-submit="save(profileForm)" accept-charset="utf-8">
            <!-- PERSONAL INFORMATION -->
            <ion-list>
              <h4>Informações Pessoais</h4>

              <label class="item item-input" >
                <span class="input-label">Nome</span>
                <input type="text" name="userName" ng-model="profile.name" readonly>
              </label>

              <label class="item item-input">
                <span class="input-label">Sexo</span>

                  <label class="item item-radio">
                    <input type="radio" name="gender" ng-model="profile.gender" value="female">
                    <div class="item-content">F</div>
                    <i class="radio-icon ion-checkmark"></i>
                  </label>

                  <label class="item item-radio">
                    <input type="radio" name="gender" ng-model="profile.gender" value="male">
                    <div class="item-content">M</div>
                    <i class="radio-icon ion-checkmark"></i>
                  </label>
              </label>
            </ion-list>

            <!-- SONS NESTED FORM -->
            <div class="list sons-nested-list">

              <h4 class="">
                Cadastro de Filhos
              </h4>

              <div ng-repeat="son in profile.sons">
                <div ng-hide="son._destroy">
                  <div class="row">
                    <div class="col col-25">
                      <h5>
                        {{$index+1}}° Filho
                        <i class="radio-icon ion-close" ng-click="showConfirm($index, profile)"></i>
                      </h5>

                    </div>
                  </div>

                  <label class="item item-input" ng-class="{ 'has-error' : profileForm.sonName{{$index}}.$invalid}">
                    <span class="input-label">Nome</span>
                    <input type="text" name="sonName{{$index}}" ng-model="profile.sons[$index].name"  ng-required="{{$index}} == 0">
                  </label>

                  <label class="item item-input">
                    <span class="input-label">Data de nasc.</span>
                    <input type="date" name="sonBornDate" ng-model="profile.sons[$index].bornDate"  ng-required="{{$index == 0}}">
                  </label>
                  <span class="message-bornDate">Se você está grávida, coloque a data aproximada do parto</span>
                  <label class="item item-input">
                    <span class="input-label">Sexo</span>

                      <label class="item item-radio">
                        <input type="radio" name="female{{$index}}" value="female" ng-model="profile.sons[$index].gender">
                        <div class="item-content">F</div>
                        <i class="radio-icon ion-checkmark"></i>
                      </label>

                      <label class="item item-radio">
                        <input type="radio" name="male{{$index}}" value="male" ng-model="profile.sons[$index].gender">
                        <div class="item-content">M</div>
                        <i class="radio-icon ion-checkmark"></i>
                      </label>
                  </label>
                </div>
              </div>
              <button type="button" class="button button-block button-positive" ng-click="addSon()"> Adicionar outro filho </button>
            </div>

            <!-- CELLPHONE INFORMATION -->
            <h4>Telefones</h4>
            <p>
              Cadastre seu número de celular para receber informações personalizadas sobre os cuidados básicos do bebê.
            </p>
            <div class="list">
              <label class="item item-input" ng-class="{ 'has-error' : profileForm.cellPhone.$invalid}">
                <span class="input-label">Celular</span>
                <input type="text" ng-blur="validadeCellNumber()" name="cellPhone" ng-model="profile.cellPhone" required>
              </label>

            </div>
            <button type="submit" class="button button-block button-positive" /> {{ profileForm.$valid ? 'Atualizar perfil': 'Preencha todos os campos'}} </button>
          </form>
        </div>
      </div>
      </ion-content>
    </ion-side-menu-content>

    <!-- SIDE MENU -->
    <ion-side-menu side="left">
      <ion-content class='has-header' scroll='false'>
        <ion-list ng-controller="MessagesCtrl">
          <ion-item nav-clear menu-close ng-click="selectChild(child)" ng-repeat="child in children">
            <child-name child="child"></child-name>
          </ion-item>
        </ion-list>

        <ion-list ng-controller="ProfileCtrl">
          <ion-item nav-clear ng-click="index()">
            <i class="ion-person"></i>
            Perfil
          </ion-item>
        </ion-list>

        <ion-list ng-controller="AuthCtrl">
          <ion-item nav-clear ng-click="signOut()">
            <i class="ion-close-circled"></i>
            Sair
          </ion-item>
        </ion-list>
      </ion-content>
    </ion-side-menu>

  </ion-side-menus>
</ion-view>
